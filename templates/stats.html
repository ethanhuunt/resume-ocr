{% extends 'layout.html' %}

{% load static %}
{%block content%}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css">
    <title>통계</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>  <!--차트링크-->
</head>
<body>
    <!-- 성비 -->
    <input type="text" name="" id="women" value="{{per_women}}" style="display: none;">
    <input type="text" name="" id="men" value="{{per_men}}" style="display: none;">
    <div class="chart-div">
        <h1>HAP</h1>
        <canvas id="pieChartCanvas" width="300px" height="300px"></canvas>
        <br><br><br><hr><br><br><br>
    </div>


    <!-- 연령대 -->
    <input type="text" id="20s" value="{{age_20s}}" style="display: none;">
    <input type="text" id="30s" value="{{age_30s}}" style="display: none;">
    <input type="text" id="40s" value="{{age_40s}}" style="display: none;">
    <input type="text" id="50s" value="{{age_50s}}" style="display: none;">
    <input type="text" id="60s" value="{{age_60s}}" style="display: none;">
    <input type="text" id="else" value="{{age_else}}" style="display: none;">
    <div class="container">
        연령대
        <canvas id="myChart1"></canvas>
        <br><br><br><hr><br><br><br>
    </div>


    <!-- 직급별 연봉 -->
    <div class="container">
      직급별 연봉
      <canvas id="bar-chart-horizontal" width="600" height="250"></canvas>
      <br><br><br><hr><br><br><br>
    </div>


    <!--입사율-->
    <input type="text" id="hr_2021" value="{{hr_2021}}" style="display: none;">
    <input type="text" id="hr_2020" value="{{hr_2020}}" style="display: none;">
    <input type="text" id="hr_2019" value="{{hr_2019}}" style="display: none;">
    <input type="text" id="hr_2018" value="{{hr_2018}}" style="display: none;">
    <input type="text" id="hr_2017" value="{{hr_2017}}" style="display: none;">
    <input type="text" id="hr_2016" value="{{hr_2016}}" style="display: none;">
    <div class="container">
      입사율, 퇴사율
      <canvas id="myChart2"></canvas>
      <br><br><br><hr><br><br><br>
  </div>


<script>
    // 성비
    window.onload = function () {
    pieChartDraw();
}

let pieChartData = {
    labels: ['여자', '남자'],
    datasets: [{
        data: [ document.getElementById("women").value, document.getElementById("men").value,],
        backgroundColor: ['rgb(255, 99, 132, 0.7)','rgb(54, 162, 235, 0.7)',]
    }] 
};

let pieChartDraw = function () {
    let ctx = document.getElementById('pieChartCanvas').getContext('2d');
    
    window.pieChart = new Chart(ctx, {
        type: 'pie',
        data: pieChartData,
        options: {
            responsive: false
        }
    });
};
</script>


<!-- 부트스트랩-->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

<script>
    // 연령대 차트
    var ctx = document.getElementById('myChart1');
    var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['20대', '30대', '40대', '50대', '60대', '그 외'],
        datasets: [{
          label: '',
          data: [
            document.getElementById("20s").value, 
            document.getElementById("30s").value, 
            // document.getElementById("40s").value, 
            22,
            document.getElementById("50s").value, 
            document.getElementById("60s").value, 
            // document.getElementById("else").value, 
            4
            ],
          backgroundColor: [
            'rgba(95,158,160, 0.5)',
            'rgba(65,105,225, 0.4)',
            'rgba(255, 206, 86, 0.5)',
            'rgba(75, 192, 192, 0.5)',
            'rgba(240,128,128, 0.5)',
            'rgba(255, 159, 64, 0.5)'
          ],
          borderColor: [
            'rgba(95,158,160, 1)',
            'rgba(65,105,225, 0.8)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(240,128,128, 1)',
            'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 2
        }]
      },
      options: {
        scales: {
          yAxes: [{
            ticks: {
              beginAtZero: true
            }
          }]
        }
      }
    });
</script>


<script>
  //직급별 연봉
  new Chart(document.getElementById("bar-chart-horizontal"), {
    type: 'horizontalBar',
    data: {
      labels: ["전무", "이사", "부서장", "팀장", "과장", "차장", "부장", "대리", "사원"],
      datasets: [
        {
          label: "Population (millions)",
          backgroundColor: [
          'rgba(25,25,112, 0.7)', 
          'rgba(72,61,139, 0.7)', 
          'rgba(106,90,205, 0.7)', 
          'rgba(123,104,238, 0.7)', 
          'rgba(147,112,219, 0.7)', 
          'rgba(186,85,211, 0.7)', 
          'rgba(218,112,214, 0.7)', 
          'rgba(221,160,221, 0.7)', 
          'rgba(255,192,203, 0.7)', 
          ],
          data: [7914.6,6822.9,6010.2,5899.1,5725.3,5523.6,5019.5,4209.4,3830.9]
        }
      ]
    },
    options: {
      legend: { display: false },
      title: {
        display: false,
        text: '직급별 연봉'
      }
    }
});
</script>


<script>
  // 입사율 , 퇴사율 
  var ctx = document.getElementById('myChart2').getContext('2d');
  var chart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['2016년', '2017년', '2018년', '2019년', '2020년', '2021년'],
      datasets: [{
        // 입사율
        label: '입사율',
        backgroundColor: 'transparent',
        borderColor: '#0978FE',
        data: [
          document.getElementById("hr_2021").value,
          document.getElementById("hr_2020").value,
          document.getElementById("hr_2019").value,
          document.getElementById("hr_2018").value,
          document.getElementById("hr_2017").value,
          // document.getElementById("hr_2016").value,
          32
        ]
      },
      {
        // 퇴사율
        label: '퇴사율',
        backgroundColor: 'transparent',
        borderColor: '#F43B15',
        data: [15, 20, 25, 24, 18, 14]
      },
  ]
    },
    options: {}
  });
</script>  



</body>
</html>

{%endblock%}